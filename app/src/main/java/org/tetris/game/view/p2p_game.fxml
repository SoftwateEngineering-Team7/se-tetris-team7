<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.text.Font?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           prefWidth="1000" prefHeight="600">

    <BorderPane fx:id="root"
                prefWidth="1000" prefHeight="600"
                style="-fx-background-color: #1a1a2e;">

        <!-- ============== 상단: Ping 정보 ============== -->
        <top>
            <HBox alignment="CENTER" spacing="40"
                  style="-fx-background-color: #16213e; -fx-padding: 5;">
                <children>
                    <HBox alignment="CENTER" spacing="10">
                        <children>
                            <Label text="My Ping:" textFill="#e94560">
                                <font>
                                    <Font name="Arial Bold" size="12.0" />
                                </font>
                            </Label>
                            <Label fx:id="myPingLabel" text="-- ms" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="12.0" />
                                </font>
                            </Label>
                        </children>
                    </HBox>
                    <HBox alignment="CENTER" spacing="10">
                        <children>
                            <Label text="Opponent Ping:" textFill="#e94560">
                                <font>
                                    <Font name="Arial Bold" size="12.0" />
                                </font>
                            </Label>
                            <Label fx:id="opponentPingLabel" text="-- ms" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="12.0" />
                                </font>
                            </Label>
                        </children>
                    </HBox>
                </children>
            </HBox>
        </top>

        <!-- ============== 중앙: 두 개의 게임 보드 + MY CONTROLS ============== -->
        <center>
            <VBox alignment="CENTER" spacing="20">
                <children>
                    <HBox alignment="CENTER" spacing="60">
                        <children>
                            <!-- 상대방 보드 (왼쪽) -->
                            <Pane fx:id="gameBoard2"
                                  prefWidth="300" prefHeight="600">
                                <style>-fx-background-color: black; -fx-border-color: #333; -fx-border-width: 2;</style>
                            </Pane>

                            <!-- 본인 보드 (오른쪽) -->
                            <Pane fx:id="gameBoard1"
                                  prefWidth="300" prefHeight="600">
                                <style>-fx-background-color: black; -fx-border-color: #333; -fx-border-width: 2;</style>
                            </Pane>
                        </children>
                    </HBox>

                    <!-- MY CONTROLS (두 보드 아래 중앙 정렬) -->
                    <VBox alignment="CENTER" spacing="8"
                          maxWidth="500"
                          style="-fx-padding: 10;">
                        <children>
                            <Label text="MY CONTROLS" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <HBox alignment="CENTER" spacing="20">
                                <children>
                                    <Label fx:id="moveControlLabel1" text="Move: A / D" textFill="lightgray" />
                                    <Label fx:id="rotateControlLabel1" text="Rotate: W" textFill="lightgray" />
                                    <Label fx:id="softDropControlLabel1" text="Down: S" textFill="lightgray" />
                                    <Label fx:id="hardDropControlLabel1" text="Drop: F" textFill="yellow">
                                        <font>
                                            <Font name="System Bold" size="12" />
                                        </font>
                                    </Label>
                                </children>
                            </HBox>
                        </children>
                    </VBox>
                </children>
            </VBox>
        </center>

        <!-- ============== 왼쪽: 상대방 (Player 2) 정보 ============== -->
        <left>
            <VBox alignment="TOP_CENTER" spacing="15"
                  prefWidth="200"
                  style="-fx-background-color: #16213e;">
                <children>
                    <Label text="OPPONENT" textFill="white">
                        <font>
                            <Font name="Arial Black" size="20.0" />
                        </font>
                    </Label>

                    <!-- NEXT -->
                    <VBox alignment="CENTER" spacing="5">
                        <children>
                            <Label text="NEXT" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="16.0" />
                                </font>
                            </Label>
                            <Pane fx:id="nextBlockPane2"
                                  prefWidth="150" prefHeight="100"
                                  style="-fx-background-color: #0f3460; -fx-border-color: #533483; -fx-border-width: 2;">
                                <effect>
                                    <DropShadow height="10.0" radius="4.5" width="10.0">
                                        <color>
                                            <Color opacity="0.5" />
                                        </color>
                                    </DropShadow>
                                </effect>
                            </Pane>
                        </children>
                    </VBox>

                    <!-- ATTACK -->
                    <VBox alignment="CENTER" spacing="5">
                        <children>
                            <Label text="ATTACK" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="16.0" />
                                </font>
                            </Label>
                            <Pane fx:id="attackPreviewPane2"
                                  prefWidth="180" prefHeight="180"
                                  minWidth="180" maxWidth="180"
                                  minHeight="180" maxHeight="180"
                                  style="-fx-background-color: #000000; -fx-border-color: #e94560; -fx-border-width: 1;">
                            </Pane>
                        </children>
                    </VBox>

                    <!-- SCORE -->
                    <VBox alignment="CENTER" spacing="2">
                        <children>
                            <Label text="SCORE" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="scoreLabel2" text="0" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>

                    <!-- LEVEL -->
                    <VBox alignment="CENTER" spacing="2">
                        <children>
                            <Label text="LEVEL" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="levelLabel2" text="1" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>

                    <!-- LINES -->
                    <VBox alignment="CENTER" spacing="2">
                        <children>
                            <Label text="LINES" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="linesLabel2" text="0" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>

                    <!-- TIME (Time Attack 전용) -->
                    <VBox fx:id="timeAttackBox2" alignment="CENTER" spacing="5" visible="false" managed="false">
                        <children>
                            <Label text="TIME" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="timerLabel2" text="03:00" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>
                </children>
                <BorderPane.margin>
                    <Insets top="20.0" left="20.0" bottom="20.0" right="10.0" />
                </BorderPane.margin>
            </VBox>
        </left>

        <!-- ============== 오른쪽: 본인 (Player 1) 정보 + Pause 버튼 ============== -->
        <right>
            <VBox alignment="TOP_CENTER" spacing="10"
                  prefWidth="200"
                  style="-fx-background-color: #16213e;">
                <children>
                    <Label text="ME" textFill="white">
                        <font>
                            <Font name="Arial Black" size="20.0" />
                        </font>
                    </Label>

                    <!-- NEXT -->
                    <VBox alignment="CENTER" spacing="5">
                        <children>
                            <Label text="NEXT" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="16.0" />
                                </font>
                            </Label>
                            <Pane fx:id="nextBlockPane1"
                                  prefWidth="150" prefHeight="100"
                                  style="-fx-background-color: #0f3460; -fx-border-color: #533483; -fx-border-width: 2;">
                                <effect>
                                    <DropShadow height="10.0" radius="4.5" width="10.0">
                                        <color>
                                            <Color opacity="0.5" />
                                        </color>
                                    </DropShadow>
                                </effect>
                            </Pane>
                        </children>
                    </VBox>

                    <!-- ATTACK -->
                    <VBox alignment="CENTER" spacing="5">
                        <children>
                            <Label text="ATTACK" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="16.0" />
                                </font>
                            </Label>
                            <Pane fx:id="attackPreviewPane1"
                                  prefWidth="180" prefHeight="180"
                                  minWidth="180" maxWidth="180"
                                  minHeight="180" maxHeight="180"
                                  style="-fx-background-color: #000000; -fx-border-color: #e94560; -fx-border-width: 1;">
                            </Pane>
                        </children>
                    </VBox>

                    <!-- SCORE -->
                    <VBox alignment="CENTER" spacing="2">
                        <children>
                            <Label text="SCORE" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="scoreLabel1" text="0" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>

                    <!-- LEVEL -->
                    <VBox alignment="CENTER" spacing="2">
                        <children>
                            <Label text="LEVEL" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="levelLabel1" text="1" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>

                    <!-- LINES -->
                    <VBox alignment="CENTER" spacing="2">
                        <children>
                            <Label text="LINES" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="linesLabel1" text="0" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>

                    <!-- TIME (Time Attack 전용) -->
                    <VBox fx:id="timeAttackBox1" alignment="CENTER" spacing="5" visible="false" managed="false">
                        <children>
                            <Label text="TIME" textFill="#e94560">
                                <font>
                                    <Font name="Arial Black" size="14.0" />
                                </font>
                            </Label>
                            <Label fx:id="timerLabel1" text="03:00" textFill="white">
                                <font>
                                    <Font name="Consolas Bold" size="20.0" />
                                </font>
                            </Label>
                        </children>
                    </VBox>

                    <!-- Pause 버튼 -->
                    <Button fx:id="pauseButton" text="PAUSE"
                            prefWidth="150" prefHeight="30"
                            style="-fx-background-color: #533483; -fx-text-fill: white; -fx-background-radius: 5;">
                        <font>
                            <Font name="Arial Bold" size="12.0" />
                        </font>
                        <effect>
                            <DropShadow height="8.0" radius="3.5" width="8.0">
                                <color>
                                    <Color opacity="0.5" />
                                </color>
                            </DropShadow>
                        </effect>
                        <VBox.margin>
                            <Insets top="10.0" />
                        </VBox.margin>
                    </Button>
                </children>
                <BorderPane.margin>
                    <Insets top="20.0" right="20.0" bottom="20.0" left="10.0" />
                </BorderPane.margin>
            </VBox>
        </right>

    </BorderPane>

    <!-- ============== 게임 오버 오버레이 ============== -->
    <HBox fx:id="gameOverOverlay" alignment="CENTER"
          visible="false" managed="false"
          prefWidth="1000" prefHeight="600"
          style="-fx-background-color: rgba(0, 0, 0, 0.8);">
        <children>
            <VBox alignment="CENTER" spacing="15">
                <children>
                    <Label text="GAME OVER" textFill="#e94560">
                        <font>
                            <Font name="Arial Black" size="48.0" />
                        </font>
                        <effect>
                            <DropShadow height="15.0" radius="7.0" width="15.0">
                                <color>
                                    <Color red="0.91" green="0.27" blue="0.38" opacity="0.8" />
                                </color>
                            </DropShadow>
                        </effect>
                    </Label>
                    <Label fx:id="winnerLabel" text="PLAYER 1 WINS" textFill="white">
                        <font>
                            <Font name="Arial Bold" size="20.0" />
                        </font>
                    </Label>
                    <Button fx:id="restartButton" text="RESTART"
                            prefWidth="150" prefHeight="40"
                            style="-fx-background-color: #e94560; -fx-text-fill: white; -fx-background-radius: 5;">
                        <font>
                            <Font name="Arial Bold" size="16.0" />
                        </font>
                    </Button>
                    <Button fx:id="replayButton" text="REPLAY"
                            prefWidth="150" prefHeight="40"
                            style="-fx-background-color: #FFA500; -fx-text-fill: white; -fx-background-radius: 5;">
                        <font>
                            <Font name="Arial Bold" size="16.0" />
                        </font>
                    </Button>
                    <Button fx:id="menuButton" text="MENU"
                            prefWidth="150" prefHeight="40"
                            style="-fx-background-color: #533483; -fx-text-fill: white; -fx-background-radius: 5;">
                        <font>
                            <Font name="Arial Bold" size="16.0" />
                        </font>
                    </Button>
                </children>
            </VBox>
        </children>
    </HBox>

    <!-- ============== 일시정지 오버레이 ============== -->
    <HBox fx:id="pauseOverlay" alignment="CENTER"
          visible="false" managed="false"
          prefWidth="1000" prefHeight="600"
          style="-fx-background-color: rgba(0, 0, 0, 0.7);">
        <children>
            <VBox alignment="CENTER" spacing="20">
                <children>
                    <Label text="PAUSED" textFill="#533483">
                        <font>
                            <Font name="Arial Black" size="48.0" />
                        </font>
                        <effect>
                            <DropShadow height="15.0" radius="7.0" width="15.0">
                                <color>
                                    <Color red="0.33" green="0.20" blue="0.51" opacity="0.8" />
                                </color>
                            </DropShadow>
                        </effect>
                    </Label>
                    <Button fx:id="resumeButton" text="RESUME"
                            prefWidth="150" prefHeight="40"
                            style="-fx-background-color: #533483; -fx-text-fill: white; -fx-background-radius: 5;">
                        <font>
                            <Font name="Arial Bold" size="16.0" />
                        </font>
                        <effect>
                            <DropShadow height="8.0" radius="3.5" width="8.0">
                                <color>
                                    <Color opacity="0.5" />
                                </color>
                            </DropShadow>
                        </effect>
                    </Button>
                    <Button fx:id="pauseMenuButton" text="MAIN MENU"
                            prefWidth="150" prefHeight="40"
                            style="-fx-background-color: #e94560; -fx-text-fill: white; -fx-background-radius: 5;">
                        <font>
                            <Font name="Arial Bold" size="16.0" />
                        </font>
                        <effect>
                            <DropShadow height="8.0" radius="3.5" width="8.0">
                                <color>
                                    <Color opacity="0.5" />
                                </color>
                            </DropShadow>
                        </effect>
                    </Button>
                </children>
            </VBox>
        </children>
    </HBox>

    <!-- ============== 상대방 연결 끊김 오버레이 ============== -->
    <HBox fx:id="disconnectOverlay" alignment="CENTER"
          visible="false" managed="false"
          prefWidth="1000" prefHeight="600"
          style="-fx-background-color: rgba(0, 0, 0, 1);">
        <children>
            <VBox alignment="CENTER" spacing="20">
                <children>
                    <Label text="연결 끊김" textFill="#e94560">
                        <font>
                            <Font name="Arial Black" size="42.0" />
                        </font>
                        <effect>
                            <DropShadow height="15.0" radius="7.0" width="15.0">
                                <color>
                                    <Color red="0.91" green="0.27" blue="0.38" opacity="0.8" />
                                </color>
                            </DropShadow>
                        </effect>
                    </Label>
                    <Label fx:id="disconnectReasonLabel" text="상대방이 게임을 종료했습니다." textFill="white">
                        <font>
                            <Font name="Arial Bold" size="18.0" />
                        </font>
                    </Label>
                    <Button fx:id="disconnectMenuButton" text="메인 메뉴로 돌아가기"
                            prefWidth="200" prefHeight="45"
                            style="-fx-background-color: #533483; -fx-text-fill: white; -fx-background-radius: 5;">
                        <font>
                            <Font name="Arial Bold" size="16.0" />
                        </font>
                        <effect>
                            <DropShadow height="8.0" radius="3.5" width="8.0">
                                <color>
                                    <Color opacity="0.5" />
                                </color>
                            </DropShadow>
                        </effect>
                    </Button>
                </children>
            </VBox>
        </children>
    </HBox>

</StackPane>
